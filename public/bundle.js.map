{"version":3,"sources":["webpack:///webpack/bootstrap 14ab25101c739e83cd6d","webpack:///./src/js/BookPart.js","webpack:///./src/js/Spread.js","webpack:///./src/js/App.js","webpack:///./src/js/AnimatedTransform.js","webpack:///./src/js/Book.js","webpack:///./src/js/Page.js","webpack:///./src/js/PopUp.js","webpack:///./src/js/buildBook.js","webpack:///./src/js/makeHeroSpread.js","webpack:///./src/js/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACfA;AAAA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACjFA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,UAAU,GAAG,qBAAqB,EAAE,UAAU;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC5DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,qCAAqC,qBAAqB;AAC1D;AACA;AACA,KAAK;AACL;AACA;AACA,qCAAqC,qBAAqB;AAC1D;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACzDA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,mBAAmB,GAAG,kCAAkC;AACtE;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC7BA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACpBA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,8BAA8B,EAAE;;AAEhC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;ACxGA;;AAEA;AACA","file":"./public/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 14ab25101c739e83cd6d","class BookPart {\n  constructor(type) {\n    this.el = document.createElement('div');\n    this.el.classList.add(type);\n  }\n\n  addElToParentEl(parentElement) {\n    parentElement.appendChild(this.el);\n  }\n\n  setTransform(transformString) {\n    this.el.style.transform = transformString;\n  }\n}\n\nexport default BookPart;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/BookPart.js\n// module id = 0\n// module chunks = 0","// holds two pages and child popups.\n\nimport BookPart from './BookPart';\nimport Page from './Page';\n\nclass Spread extends BookPart {\n  constructor(isFront, isBack) {\n    super('spread');\n    this.childPopUps = [];\n\n    // page elements\n    this.leftPage = new Page('LEFT', isFront);\n    this.rightPage = new Page('RIGHT', isBack);\n\n    // spread element\n    this.el = document.createElement('div');\n    this.el.classList.add('spread');\n\n    // add page elements to spread element\n    this.leftPage.addElToParentEl(this.el);\n    this.rightPage.addElToParentEl(this.el);\n\n    // all default to closed on the right side with children hidden.\n    this.update('RIGHT', 0);\n    this.hideChildren();\n  }\n\n  // add a popup to a page in th spread or nest into other popup\n  addChild(popup, side, nestParent) {\n    this.childPopUps.push(popup);\n    if (typeof nestParent !== 'undefined') {\n      popup.addElToParentEl(nestParent.el);\n    } else if (side === 'LEFT') {\n      popup.addElToParentEl(this.leftPage.el);\n    } else if (side === 'RIGHT') {\n      popup.addElToParentEl(this.rightPage.el);\n    }\n  }\n\n  updateChildren() {\n    this.childPopUps.forEach(popup => popup.update(this.openAmount));\n  }\n\n  showChildren() {\n    this.contentsVisible = true;\n    this.leftPage.el.classList.remove('page--hide-children');\n    this.rightPage.el.classList.remove('page--hide-children');\n  }\n\n  hideChildren() {\n    this.contentsVisible = false;\n    this.leftPage.el.classList.add('page--hide-children');\n    this.rightPage.el.classList.add('page--hide-children');\n  }\n\n  /**\n    * update page transforms based on which side its on and how far open\n    * Also, if a page isn't visbile, (facing downward) its hidden to solve\n    * depth issues. Popups are hidden separately by the spread because\n    * you can see them sooner\n  */\n  update(side, openAmount) {\n    if (side !== this.side || openAmount !== this.openAmount) {\n      this.side = side;\n      this.openAmount = openAmount;\n\n      // hide popups inside a mostly closed spread\n      if (openAmount <= 0.15 && this.contentsVisible) {\n        this.hideChildren();\n      } else if (openAmount > 0.15 && !this.contentsVisible) {\n        this.showChildren();\n      }\n\n      // transform pages based on spread side and open amount\n      this.leftPage.update(side, openAmount);\n      this.rightPage.update(side, openAmount);\n      this.updateChildren();\n    }\n  }\n}\n\nexport default Spread;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Spread.js\n// module id = 1\n// module chunks = 0","// creates a book and uses mouse tracking to update its state\nimport buildBook from './buildBook';\n\nclass App {\n  constructor() {\n    this.book = buildBook();\n    this.bookMoveStart = 0;\n    this.startX = 0;\n    this.mouseX = 0;\n    this.mouseDown = false;\n    this.ticking = false;\n\n    // higher number = slower page turn speed;\n    this.sensitivity = 3;\n  }\n  start() {\n    window.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    window.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    window.addEventListener('mouseup', this.handleMouseUp.bind(this));\n  }\n  updateBook() {\n    if (this.mouseDown) {\n      const diff = (this.startX - this.mouseX) / this.sensitivity;\n      this.book.setState(this.bookMoveStart + diff);\n      this.book.update();\n    }\n    this.ticking = false;\n  }\n  handleMouseUp() {\n    this.mouseDown = false;\n  }\n  handleMouseDown(e) {\n    this.bookMoveStart = this.book.state;\n    this.startX = e.pageX;\n    this.mouseDown = true;\n  }\n  handleMouseMove(e) {\n    this.mouseX = e.pageX;\n    if (!this.ticking) {\n      this.ticking = true;\n      window.requestAnimationFrame(this.updateBook.bind(this));\n    }\n  }\n}\n\nexport default App;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/App.js\n// module id = 2\n// module chunks = 0","/**\n * example transform: transformX(10px)\n * type: 'transformX'\n * startVal: number when spread is closed\n * endVal: number when spread is open\n * unit: 'px'\n */\n\nconst AnimatedTransform = function AnimatedTransform(type, startVal, endVal, unit) {\n  /**\n   * Uses value between 0 and 1 to interpolate between start and end val\n   * when spread is almost closed, popups can stick through\n   * use easing on progress value\n   */\n  const interpolatedVal = function interpolatedVal(progress) {\n    const easedProgress = progress * progress * progress;\n    return this.startVal + (this.valDiff * easedProgress);\n  };\n\n  // get string value transformX(10px)\n  const interpolatedString = function interpolatedString(progress) {\n    const interpVal = this.interpolatedVal(progress);\n    return `${this.type}(${interpVal.toString()}${this.unit})`;\n  };\n\n  return {\n    type,\n    startVal,\n    endVal,\n    valDiff: endVal - startVal,\n    unit,\n    interpolatedVal,\n    interpolatedString,\n  };\n};\n\nexport default AnimatedTransform;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/AnimatedTransform.js\n// module id = 3\n// module chunks = 0","// holds spreads, determines spread positions and how open they are\n\nclass Book {\n  constructor(bookId) {\n    this.el = document.getElementById(bookId);\n    this.stateMultiplier = 100;\n    this.spreads = [];\n    this.updateBookLength();\n    this.state = 0;\n  }\n\n  updateBookLength() {\n    // -1 because last spread is cover, so cant turn past it\n    this.bookLength = (this.spreads.length - 1) * this.stateMultiplier;\n    return this;\n  }\n\n  addSpread(spread) {\n    this.spreads.push(spread);\n    spread.addElToParentEl(this.el);\n    this.updateBookLength();\n    return this;\n  }\n\n  setState(newState) {\n    // keeps it within max and min\n    if (newState < 0) {\n      this.state = 0;\n    } else if (newState <= this.bookLength) {\n      this.state = newState;\n    } else {\n      this.state = this.bookLength;\n    }\n\n    // store these rather than calculate for every spread\n    this.leftSpreadIndex = Math.floor(this.state / this.stateMultiplier);\n    this.rightSpreadIndex = this.leftSpreadIndex + 1;\n    this.spreadRemainder = this.state % this.stateMultiplier;\n    return this;\n  }\n\n  // given a spread and it's index, use state to determine its side and openness\n  setSpreadFromState(spread, index) {\n    if (index < this.leftSpreadIndex) {\n      spread.update('LEFT', 0);\n    } else if (index === this.leftSpreadIndex) {\n      spread.update('LEFT', ((100 - this.spreadRemainder) / 100));\n    } else if (index === this.rightSpreadIndex) {\n      spread.update('RIGHT', (this.spreadRemainder / 100));\n    } else if (index > this.rightSpreadIndex) {\n      spread.update('RIGHT', 0);\n    }\n  }\n\n  update() {\n    this.spreads.forEach(this.setSpreadFromState.bind(this));\n    return this;\n  }\n}\n\nexport default Book;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Book.js\n// module id = 4\n// module chunks = 0","import BookPart from './BookPart';\n\nclass Page extends BookPart {\n  constructor(side, isBlank) {\n    super('plane');\n    this.side = side;\n    this.hidden = false;\n    if (side === 'LEFT') {\n      this.el.classList.add('page', 'page--left');\n    } else {\n      this.el.classList.add('page', 'page--right');\n    }\n    if (isBlank) {\n      this.el.classList.add('page--blank');\n    }\n  }\n\n  hide() {\n    this.hidden = true;\n    this.el.classList.add('page--hidden');\n  }\n\n  show() {\n    this.hidden = false;\n    this.el.classList.remove('page--hidden');\n  }\n\n  checkShowHide(openAmount) {\n    if (openAmount < 0.5 && !this.hidden) {\n      this.hide();\n    } else if (openAmount >= 0.5 && this.hidden) {\n      this.show();\n    }\n  }\n\n  // update page transform based based on spreadSide and open amount\n  update(spreadSide, openAmount) {\n    if (spreadSide === 'LEFT') {\n      const pageAngle = -180 * (1 - openAmount);\n      if (this.side === 'LEFT') {\n        this.setTransform('rotateY(0deg)');\n      } else {\n        this.setTransform(`rotateY(${pageAngle.toString()}deg)`);\n        this.checkShowHide(openAmount);\n      }\n    } else {\n      const pageAngle = 180 * (1 - openAmount);\n      if (this.side === 'LEFT') {\n        this.setTransform(`rotateY(${pageAngle.toString()}deg)`);\n        this.checkShowHide(openAmount);\n      } else {\n        this.setTransform('rotateY(0deg)');\n      }\n    }\n  }\n}\n\nexport default Page;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Page.js\n// module id = 5\n// module chunks = 0","/**\n * transformBase -- string of transforms that don't change. Base position, etc.\n * animatedTransforms -- list of AnimatedTrnasforms\n*/\nimport BookPart from './BookPart';\n\nclass PopUp extends BookPart {\n  constructor(transformBase, animatedTransforms, classes) {\n    super('plane');\n    this.transformBase = transformBase;\n    this.animatedTransforms = animatedTransforms;\n    if (typeof classes !== 'undefined') {\n      classes.forEach(className => this.el.classList.add(className));\n    }\n    this.update(0);\n  }\n\n  // get string of all transforms properly interpolated\n  getTransformString(progress) {\n    const animatedTransformStates = this.animatedTransforms\n      .map(transform => transform.interpolatedString(progress));\n    return `${this.transformBase} ${animatedTransformStates.join(' ')}`;\n  }\n\n  update(progress) {\n    this.setTransform(this.getTransformString(progress));\n  }\n}\n\nexport default PopUp;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/PopUp.js\n// module id = 6\n// module chunks = 0","import Book from './Book';\nimport Spread from './Spread';\nimport makeHeroSpread from './makeHeroSpread';\n\nexport default function buildBook() {\n  // make empty cover spreads\n  const frontCover = new Spread(true, false);\n  const backCover = new Spread(false, true);\n\n  // make hero spread adds popups to spread pages\n  const supermanSpread = makeHeroSpread('superman');\n  const batmanSpread = makeHeroSpread('batman');\n\n  const book = new Book('book');\n  book.addSpread(frontCover)\n      .addSpread(supermanSpread)\n      .addSpread(batmanSpread)\n      .addSpread(backCover)\n      .update();\n  return book;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/buildBook.js\n// module id = 7\n// module chunks = 0","/**\n  * function returns a new spread with the class heroName prefixed\n  * and hero scene popups.\n  */\n\nimport Spread from './Spread';\nimport AnimatedTransform from './AnimatedTransform';\nimport PopUp from './PopUp';\n\nconst makeHeroSpread = function makeHeroSpread(heroName) {\n  const spread = new Spread(false, false);\n  // make animating popups\n  const chest = new PopUp('',\n    [\n      AnimatedTransform('translateY', 20, -30, 'px'),\n      AnimatedTransform('translateX', -50, 30, 'px'),\n      AnimatedTransform('translateZ', 1, 60, 'px'),\n      AnimatedTransform('rotateZ', 0, 15, 'deg'),\n      AnimatedTransform('rotateX', 0, -25, 'deg'),\n    ],\n    [heroName, 'chest']);\n  spread.addChild(chest, 'LEFT');\n\n  const head = new PopUp('',\n    [\n      AnimatedTransform('translateZ', 0, 5, 'px'),\n      AnimatedTransform('rotateX', 0, 195, 'deg'),\n      AnimatedTransform('rotateZ', 0, 8, 'deg'),\n    ],\n    [heroName, 'head']);\n  spread.addChild(head, 'LEFT', chest);\n\n  const pelvis = new PopUp('',\n    [\n      AnimatedTransform('rotateZ', 0, 7, 'deg'),\n      AnimatedTransform('translateZ', 0, -2, 'px'),\n    ],\n    [heroName, 'pelvis']);\n  spread.addChild(pelvis, 'LEFT', chest);\n\n  const leg1 = new PopUp('',\n    [\n      AnimatedTransform('rotateX', 0, -180, 'deg'),\n    ],\n    [heroName, 'leg1']);\n  spread.addChild(leg1, 'LEFT', pelvis);\n\n  const leg2 = new PopUp('',\n    [\n      AnimatedTransform('rotateX', 0, -180, 'deg'),\n      AnimatedTransform('rotateZ', 0, -10, 'deg'),\n    ],\n    [heroName, 'leg2']);\n  spread.addChild(leg2, 'LEFT', pelvis);\n\n  const cape = new PopUp('',\n    [\n      AnimatedTransform('rotateX', 0, -3, 'deg'),\n      AnimatedTransform('rotateZ', 0, 61, 'deg'),\n    ],\n    [heroName, 'cape']);\n  spread.addChild(cape, 'LEFT', chest);\n\n  const arm1Upper = new PopUp('',\n    [\n      AnimatedTransform('rotateZ', 0, 80, 'deg'),\n      AnimatedTransform('translateZ', 0, 5, 'px'),\n    ],\n    [heroName, 'arm1-upper']);\n  spread.addChild(arm1Upper, 'LEFT', chest);\n\n  const arm1Lower = new PopUp('',\n    [\n      AnimatedTransform('rotateZ', 0, -100, 'deg'),\n    ],\n    [heroName, 'arm1-lower']);\n  spread.addChild(arm1Lower, 'LEFT', arm1Upper);\n\n  const arm2 = new PopUp('',\n    [\n      AnimatedTransform('translateZ', 0, 10, 'px'),\n      AnimatedTransform('rotateZ', 0, -160, 'deg'),\n      AnimatedTransform('rotateX', 0, 30, 'deg'),\n    ],\n    [heroName, 'arm2']);\n  spread.addChild(arm2, 'LEFT', chest);\n\n  for (let i = 1; i <= 5; i += 1) {\n    const building = new PopUp('translateZ(1px)',\n      [\n        AnimatedTransform('rotateX', 0, 165, 'deg'),\n      ],\n      ['building', `building${i}`]);\n\n    let side = 'RIGHT';\n    if (i <= 2) {\n      side = 'LEFT';\n    }\n    spread.addChild(building, side);\n  }\n\n  return spread;\n};\n\nexport default makeHeroSpread;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/makeHeroSpread.js\n// module id = 8\n// module chunks = 0","import App from './App';\n\nconst app = new App();\napp.start();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/index.js\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}